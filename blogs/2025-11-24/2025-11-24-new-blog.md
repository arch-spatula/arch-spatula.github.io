---
title: '2025ë…„ ë¸”ë¡œê·¸ ì¬ë‹¨ì¥í•˜ê¸° 3í¸'
authors: [arch-spatula]
tags: ['node.js', 'template']
description: 'buildë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•'
date: 2025-11-24
draft: true
---

<!--
@todo: mermaid ë‹¤ì´ì–´ê·¸ë¨ ë¹Œë“œ ìŠ¤íƒ­ì— ì²˜ë¦¬í•˜ë„ë¡ ë§Œë“¤ê¸°
@todo: ë‹¤ì´ì–´ê·¸ë¨ì„ 2025-11-23-new-blog.mdì— ì •ë¦¬í•˜ê¸°
@todo: ì´ë¯¸ì§€ë¥¼ ë§ˆí¬ë‹¤ìš´ í´ë”ì— ê°™ì´ ë„£ì–´ë‘” ë¡œì§ ì‘ì„±í•˜ê¸°
-->

## í”„ë¡œì íŠ¸ í…œí”Œë¦¿ ì²˜ë¦¬ ë°©ì‹

### 1. ì „ì²´ ë¹Œë“œ íë¦„

```mermaid
flowchart TB
    subgraph Init["ì´ˆê¸°í™” ë‹¨ê³„"]
        A[build.ts ì‹œì‘] --> B[í…œí”Œë¦¿ íŒŒì¼ ë¡œë“œ]
        B --> B1[app.html]
        B --> B2[post.html]
        B --> B3[main.html]
        B --> B4[search.html]
    end

    subgraph Prepare["ì¤€ë¹„ ë‹¨ê³„"]
        C[ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ëª©ë¡í™”] --> D[dist í´ë” ì´ˆê¸°í™”]
        D --> E[asset í´ë” ë³µì‚¬]
        E --> F[ì´ë¯¸ì§€ íŒŒì¼ ë³µì‚¬]
        F --> G[client TS â†’ JS ë¹Œë“œ]
    end

    subgraph Meta["ë©”íƒ€ë°ì´í„° ì²˜ë¦¬"]
        H[ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì½ê¸°] --> I[ë©”íƒ€ë°ì´í„° ì¶”ì¶œ]
        I --> J{draft ì—¬ë¶€}
        J -->|draft: true| K[ìŠ¤í‚µ]
        J -->|draft: false| L[metaJsonì— ì¶”ê°€]
        L --> M[íƒœê·¸ ì •ë³´ ìˆ˜ì§‘]
    end

    subgraph Render["ë Œë”ë§ ë‹¨ê³„"]
        N[search í…œí”Œë¦¿ ë Œë”ë§] --> O[ê° í¬ìŠ¤íŠ¸ ì²˜ë¦¬]
        O --> P[main í˜ì´ì§€ ìƒì„±]
        P --> Q[404 í˜ì´ì§€ ìƒì„±]
    end

    Init --> Prepare
    Prepare --> Meta
    Meta --> Render
```

### 2. í…œí”Œë¦¿ ì—”ì§„ ì²˜ë¦¬ ìˆœì„œ

```mermaid
flowchart LR
    subgraph Input["ì…ë ¥"]
        T[í…œí”Œë¦¿ ë¬¸ìì—´]
        D[ë°ì´í„° ê°ì²´]
    end

    subgraph Process["render í•¨ìˆ˜ ì²˜ë¦¬ ìˆœì„œ"]
        A["1ï¸âƒ£ renderConditional<br/>ì¡°ê±´ë¬¸ ì²˜ë¦¬"] --> B["2ï¸âƒ£ renderEach<br/>ë°˜ë³µë¬¸ ì²˜ë¦¬"]
        B --> C["3ï¸âƒ£ renderTemplate<br/>í”Œë ˆì´ìŠ¤í™€ë” ì¹˜í™˜"]
    end

    subgraph Syntax["ì§€ì› ë¬¸ë²•"]
        S1["{{#if KEY}}...{{/if}}"]
        S2["{{#each ARRAY}}...{{/each}}"]
        S3["{{PLACEHOLDER}}"]
    end

    T --> A
    D --> A
    C --> R[ë Œë”ë§ëœ HTML]

    A -.-> S1
    B -.-> S2
    C -.-> S3
```

### 3. í…œí”Œë¦¿ ì¡°í•© êµ¬ì¡°

```mermaid
flowchart TB
    subgraph Templates["í…œí”Œë¦¿ íŒŒì¼ë“¤"]
        APP["app.html<br/>(ê¸°ë³¸ ë ˆì´ì•„ì›ƒ)"]
        POST["post.html<br/>(í¬ìŠ¤íŠ¸ ë‚´ìš©)"]
        MAIN["main.html<br/>(ë¸”ë¡œê·¸ ëª©ë¡)"]
        SEARCH["search.html<br/>(ê²€ìƒ‰ íŒì—…)"]
    end

    subgraph PostPage["í¬ìŠ¤íŠ¸ í˜ì´ì§€ ìƒì„±"]
        MD[ë§ˆí¬ë‹¤ìš´ íŒŒì¼] --> HTML[HTML ë³€í™˜]
        HTML --> POST_RENDER["post í…œí”Œë¦¿ ë Œë”ë§<br/>{{content}}, {{tags}}, {{toc}}"]
        POST_RENDER --> APP_RENDER["app í…œí”Œë¦¿ ë Œë”ë§<br/>{{body}}, {{search}}"]
    end

    subgraph MainPage["ë©”ì¸ í˜ì´ì§€ ìƒì„±"]
        META[metaJson] --> MAIN_RENDER["main í…œí”Œë¦¿ ë Œë”ë§<br/>{{#each posts}}"]
        MAIN_RENDER --> APP_MAIN["app í…œí”Œë¦¿ ë Œë”ë§<br/>{{body}}, {{search}}"]
    end

    POST --> POST_RENDER
    APP --> APP_RENDER
    APP --> APP_MAIN
    MAIN --> MAIN_RENDER
    SEARCH --> APP_RENDER
    SEARCH --> APP_MAIN

    APP_RENDER --> DIST1[dist/*.html]
    APP_MAIN --> DIST2[dist/index.html]
```

### 4. ë§ˆí¬ë‹¤ìš´ â†’ HTML ë³€í™˜ íŒŒì´í”„ë¼ì¸

```mermaid
flowchart TB
    subgraph Remark["Remark íŒŒì‹±"]
        A[ë§ˆí¬ë‹¤ìš´ ì›ë³¸] --> B[remark-parse]
        B --> C[remark-gfm]
        C --> D[remark-directive]
        D --> E[remarkCallout]
    end

    subgraph Rehype["Rehype ë³€í™˜"]
        E --> F[remark2rehype]
        F --> G[rehype-slug]
        G --> H[rehypeExtractToc]
        H --> I[rehype-shiki]
        I --> J[rehype-stringify]
    end

    J --> K[HTML + TOC]
    K --> L[escapeTemplateSyntax]
    L --> M[ìµœì¢… HTML]
```

### 5. ë°ì´í„° í”Œë¡œìš° ìƒì„¸

```mermaid
flowchart TB
    subgraph Source["ì†ŒìŠ¤ íŒŒì¼"]
        MD[blogs/*.md]
        TPL[app/templates/*.html]
    end

    subgraph Processing["ì²˜ë¦¬ ê³¼ì •"]
        READ[readMarkdownFile] --> SPLIT[splitMetadataAndContent]
        SPLIT --> META_PROC[processMetaData]
        SPLIT --> MD_PROC[processMarkdownFile]

        META_PROC --> |metadata| METAJSON[(metaJson)]
        MD_PROC --> |html| TEMPLATE[í…œí”Œë¦¿ ì—”ì§„]
    end

    subgraph Output["ì¶œë ¥"]
        TEMPLATE --> HTML_FILE[dist/*.html]
        METAJSON --> JSON_FILE[dist/meta.json]
    end

    MD --> READ
    TPL --> TEMPLATE
    METAJSON --> TEMPLATE
```

### ì£¼ìš” í…œí”Œë¦¿ í”Œë ˆì´ìŠ¤í™€ë” ì •ë¦¬

| í…œí”Œë¦¿        | í”Œë ˆì´ìŠ¤í™€ë”                   | ì„¤ëª…               |
| ------------- | ------------------------------ | ------------------ |
| `app.html`    | `{{body}}`                     | ë©”ì¸ ì½˜í…ì¸  ì˜ì—­   |
|               | `{{search}}`                   | ê²€ìƒ‰ íŒì—… HTML     |
|               | `{{title}}`, `{{description}}` | SEO ë©”íƒ€ ì •ë³´      |
| `post.html`   | `{{content}}`                  | ë§ˆí¬ë‹¤ìš´ ë³€í™˜ HTML |
|               | `{{#each tags}}`               | íƒœê·¸ ëª©ë¡ ë°˜ë³µ     |
|               | `{{#each toc}}`                | ëª©ì°¨ ë°˜ë³µ          |
|               | `{{#if previousPost}}`         | ì´ì „ ê¸€ ì¡°ê±´ë¶€     |
| `main.html`   | `{{#each posts}}`              | ë¸”ë¡œê·¸ ëª©ë¡ ë°˜ë³µ   |
| `search.html` | `{{#each tags}}`               | íƒœê·¸ í•„í„° ëª©ë¡     |
|               | `{{#each posts}}`              | ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡     |

ì´ ë‹¤ì´ì–´ê·¸ë¨ë“¤ì´ í”„ë¡œì íŠ¸ì˜ í…œí”Œë¦¿ ì²˜ë¦¬ ë°©ì‹ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤! ğŸ¨

<!--
## ì„¸ì´ë¸Œ ì›ê³ 
## ì´ˆê¸°í™” ì‹œì ì— ì‹¤í–‰í•  ë¡œì§ë“¤

```ts
const metaJson: Metadata[] = [];

const appTemplate = await readFile(join(process.cwd(), 'app', 'templates', 'app.html'), 'utf8');
const postTemplate = await readFile(join(process.cwd(), 'app', 'templates', 'post.html'), 'utf8');
const mainTemplate = await readFile(join(process.cwd(), 'app', 'templates', 'main.html'), 'utf8');
const searchTemplate = await readFile(join(process.cwd(), 'app', 'templates', 'search.html'), 'utf8');

// /blogsì˜ ëª¨ë“  ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
const blogsDir = join(process.cwd(), 'blogs');

// dist í´ë” ë‚´ìš© ì´ˆê¸°í™”í•˜ê¸°
await rm(join(process.cwd(), 'dist'), { recursive: true, force: true });
mkdirSync(join(process.cwd(), 'dist'), { recursive: true });

// asset í´ë” ë‚´ìš© ë³µì‚¬í•˜ê¸°
await cp(join(process.cwd(), 'app', 'asset'), join(process.cwd(), 'dist'), { recursive: true });

// client TypeScriptë¥¼ JavaScriptë¡œ ë¹Œë“œí•˜ê¸°
await esbuild.build({
  entryPoints: [join(process.cwd(), 'app', 'client', 'index.ts')],
  bundle: true,
  minify: true,
  outfile: join(process.cwd(), 'dist', 'script.js'),
  target: 'es2020',
  platform: 'browser',
});

// ë©”íƒ€ ì •ë³´ì™€ ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ ë¥¼ ì €ì¥í•  ë§µ (íŒŒì¼ ê²½ë¡œ ê¸°ì¤€)
const contentMap = new Map<string, string>();

// ê¹¨ì§„ ì´ë¯¸ì§€ ë§í¬ ìˆ˜ì§‘ìš© ë°°ì—´
const allBrokenImageLinks: BrokenImageLink[] = [];
const assetDir = join(process.cwd(), 'app', 'asset');
```

- ì´ˆê¸°í™”ëŠ” ê·¹ë„ë¡œ ë‹¨ìˆœí•©ë‹ˆë‹¤.
- ë³€ìˆ˜ëŠ” ë©”íƒ€ì •ë³´ë¥¼ ë‹´ì„ ë°°ì—´ `metaJson`, ë§ˆí¬ë‹¤ìš´ ë¬¸ìì—´ì„ íŒŒì¼ ê²½ë¡œë‘ ë§µí•‘í•  `contentMap`, ê¹¨ì§„ ë§í¬ë¥¼ ì €ì¥í•  ë°°ì—´ `allBrokenImageLinks`ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤. ì´ ë³€ìˆ˜ë“¤ì€ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë©´ì„œ ë‹´ê¸° ìœ„í•œ ìš©ë„ì…ë‹ˆë‹¤.
- ë¹Œë“œë¥¼ ì²˜ë¦¬í•˜ë©´ì„œ ì½ê¸°ë§Œì„ ìœ„í•´ í…œí”Œë¦¿ìœ¼ë¡œ í™œìš©í•  html íŒŒì¼ì„ ì½ê³  ë§ˆí¬ë‹¤ìš´ê³¼ `asset` ê²½ë¡œì— í•´ë‹¹í•˜ëŠ” ë¬¸ìì—´ì„ ì´ˆê¸°í™” í•©ë‹ˆë‹¤.
- ì²˜ë¦¬í•˜ëŠ” í–‰ìœ„ëŠ” `dist` í´ë”ë¥¼ ë¹„ì›Œë²„ë¦¬ê³  `asset` í´ë”ì˜ ì´ë¯¸ì§€ë¥¼ ë³µì‚¬í•˜ê³  í´ë¼ì´ì–¸íŠ¸ ëŸ°íƒ€ì„ì—ì„œ ì‹¤í–‰í•  ë¡œì§ì„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€í™˜í•˜ê³  `script.js`ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
- ì—¬ê¸°ì„œëŠ” ëª¨ë‘ node.jsì—ì„œ ì œê³µí•˜ëŠ” í•¨ìˆ˜ì™€ ì„¤ì°¨íŒ esbuild ë¼ì´ë¸ŒëŸ¬ë¦¬ ì •ë„ í™œìš©í–ˆìŠµë‹ˆë‹¤.

## ë§ˆí¬ë‹¤ìš´ê³¼ ì´ë¯¸ì§€ ê²½ë¡œ ë¦¬ìŠ¤íŠ¸ì—…

```ts
// /blogsì˜ ëª¨ë“  ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
const blogsDir = join(process.cwd(), 'blogs');
const markdownfiles = await listUpMarkdownFiles(blogsDir);

// blogs í´ë”ì˜ ì´ë¯¸ì§€ íŒŒì¼ë“¤ì„ distë¡œ ë³µì‚¬ (í´ë” êµ¬ì¡° ìœ ì§€)
const imageFiles = await listUpImageFiles(blogsDir);
for (const imagePath of imageFiles) {
  // blogs/ ê¸°ì¤€ ìƒëŒ€ ê²½ë¡œ ìœ ì§€
  const relativePath = imagePath.replace(`${blogsDir}/`, '');
  const destPath = join(process.cwd(), 'dist', relativePath);
  mkdirSync(dirname(destPath), { recursive: true });
  await cp(imagePath, destPath);
}
```

- ì²˜ë¦¬í•  ë¦¬ìŠ¤íŠ¸ì—…ì€ 2ê°€ì§€ì…ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ì˜ ëª©ë¡ê³¼ ì²˜ë¦¬í•  ì´ë¯¸ì§€ ëª©ë¡ ì •ë„ ê°€ì ¸ì˜¤ê³  ì²˜ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.
- ì´ë¯¸ì§€ ë³µì‚¬ëŠ” ë‹¨ìˆœí•´ì„œ ë°”ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.
- ë” ë†’ì€ ìˆ˜ì¤€ì„ ê°–ê²Œ ë§Œë“¤ê³ ì í–ˆìœ¼ë©´ webpë¡œ ë³€í™˜ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ ë„£ëŠ” ê²ƒì´ì§€ë§Œ ì§€ê¸ˆ êµ³ì´ í•˜ê³  ì‹¶ì§€ ì•ŠìŠµë‹ˆë‹¤.

### í´ë” êµ¬ì¡°

- ì—¬ê¸°ì„œ ì•Œì•„ë‘˜ ì ì€ ë§ˆí¬ë‹¤ìš´ì´ ìˆëŠ” í´ë”ì— ê°™ì´ í™œìš©í•  ì´ë¯¸ì§€ë¥¼ ê°™ì´ ë„£ì—ˆìŠµë‹ˆë‹¤. ë¹Œë“œí•  ë•Œ ê°™ì€ í´ë” êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
- ì´ê²ƒì€ ì˜ë„ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ í”„ë ˆì„ì›Œí¬ë“¤ì€ ë§ˆí¬ë‹¤ìš´ê³¼ ì´ë¯¸ì§€ë¥¼ ì„œë¡œ ë‹¤ë¥¸ í´ë”ì— ë„£ì–´ì„œ ê´€ë¦¬í•˜ë„ë¡ ê°•ì œí–ˆìŠµë‹ˆë‹¤. ê°œë°œí•˜ë©´ì„œ ë§ˆìŒì— ì•ˆ ë“  ê²ƒì€ ì´ë¯¸ì§€ì¶”ê°€ë¥¼ í•  ë•Œ í´ë”ë¥¼ ë³„ë„ë¡œ ê´€ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ ë¶ˆí•„ìš”í•œ ë³µì¡ì„±ì„ ì¤¬ë‹¤ê³  ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

```
/root
  /content
    /blogs
      /2025-12-14
        /foo.md

  ...(ìƒëµ)

  /public
    /asset
    /blogs
      /2025-12-14
        /bar.png
```

- `content/blogs/2025-12-14/foo.md`ì— ë§ˆí¬ë‹¤ìš´ ê¸€ì´ ìˆê³  `public/blogs/2025-12-14/bar.png`ê°€ ìˆë‹¤ëŠ” ê²ƒì´ ì„œë¡œ ë™ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.

```
/root
  /blogs
    /2025-12-14
      /foo.md
      /bar.png
```

- `blogs/2025-12-14/foo.md`ì™€ `blog/2025-12-14/bar.png`ë¡œ ë³´ë©´ ë” í¸í•  ê²ƒì…ë‹ˆë‹¤. ì €ëŠ” ì‹¤ì œë¡œ ì´ ê¸€ì—ì„œë§Œ í•´ë‹¹í•˜ëŠ” ì´ë¯¸ì§€ì¸ë° êµ³ì´ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.
  - ì €ëŠ” ìœ„ì™€ ê°™ì€ í˜•íƒœì˜ í´ë”ë§ì´ ë” ìì—°ìŠ¤ëŸ½ë‹¤ê³  ë´…ë‹ˆë‹¤.

### ë¦¬ìŠ¤íŠ¸ì—… ë¡œì§

```ts
/**
 * @param dirPath ë””ë ‰í† ë¦¬ ê²½ë¡œ
 * @param baseDir ê¸°ë³¸ ë””ë ‰í† ë¦¬ ê²½ë¡œ
 * @returns ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ëª©ë¡ì„ ë°˜í™˜í•¨
 */
const listUpMarkdownFiles = async (dirPath: string, baseDir: string = dirPath) => {
  const posts: { filePath: string; isProcessed: boolean }[] = [];

  const entries = await readdir(dirPath, { withFileTypes: true });

  for (const entry of entries) {
    const fullPath = join(dirPath, entry.name);

    if (entry.isDirectory()) {
      // ì¬ê·€ì ìœ¼ë¡œ í•˜ìœ„ ë””ë ‰í† ë¦¬ íƒìƒ‰
      const subPosts = await listUpMarkdownFiles(fullPath, baseDir);
      posts.push(...subPosts);
    } else if (entry.isFile() && path.extname(entry.name) === '.md') {
      posts.push({
        filePath: fullPath,
        isProcessed: false,
      });
    }
  }
  return posts;
};
```

- ë§ˆí¬ë‹¤ìš´ ëª©ë¡ì„ ë¦¬ìŠ¤íŠ¸ì—…í•  ë•ŒëŠ” DFSë¡œ íƒìƒ‰ì„ í•©ë‹ˆë‹¤. stack ì—­í• ì„ í•´ì£¼ëŠ” `post`ë„ ìˆì§€ë§Œ `isDirectory` ë©”ì„œë“œê°€ í˜„ì¬ ë³¸ì¸ì´ ê²½ë¡œë¼ë©´ 1 depthë” ë“¤ì–´ê°€ë¼ê³  í•˜ëŠ” ë¡œì§ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
- í•˜ì§€ë§Œ íŒŒì¼ì´ë©´ íƒìƒ‰ì„ ì¤‘ë‹¨í•˜ë„ë¡ ë§Œë“ ê²ë‹ˆë‹¤.

```ts
// ì´ë¯¸ì§€ í™•ì¥ì ëª©ë¡
const IMAGE_EXTENSIONS = ['.png', '.jpg', '.jpeg', '.gif', '.svg', '.webp'];

/**
 * ì§€ì •ëœ ë””ë ‰í† ë¦¬ì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì¬ê·€ì ìœ¼ë¡œ ì°¾ëŠ” í•¨ìˆ˜
 * @param dirPath íƒìƒ‰í•  ë””ë ‰í† ë¦¬ ê²½ë¡œ
 * @returns ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œ ëª©ë¡
 */
const listUpImageFiles = async (dirPath: string): Promise<string[]> => {
  const images: string[] = [];
  const entries = await readdir(dirPath, { withFileTypes: true });

  for (const entry of entries) {
    const fullPath = join(dirPath, entry.name);
    if (entry.isDirectory()) {
      images.push(...(await listUpImageFiles(fullPath)));
    } else if (IMAGE_EXTENSIONS.includes(extname(entry.name).toLowerCase())) {
      images.push(fullPath);
    }
  }
  return images;
};
```

- ì´ë¯¸ì§€ë„ ë§ˆí¬ë‹¤ìš´ê³¼ ì²˜ë¦¬ê°€ ë™ì¼í•©ë‹ˆë‹¤.
- ë¬¼ë¡  ì´ë¯¸ì§€ íŒŒì¼ ì´ë¦„ì„ ì´ìƒí•˜ê²Œ ì‘ì„±í•˜ë©´ pushí•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒì„ pushí•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ° ë²„ê·¸ëŠ” ìƒëŒ€í•  ê°€ì¹˜ê°€ ì—†ëŠ” ë²„ê·¸ì…ë‹ˆë‹¤.
  - ì¼ë°˜ì ì´ì§€ ì•Šì€ í–‰ë™ ëª¨ë‘ ëŒ€ì‘í•´ì£¼ëŠ” ê²ƒì€ ì ì ˆí•˜ì§€ ì•Šë‹¤ê³  ë´…ë‹ˆë‹¤.

## ë©”íƒ€ ì •ë³´ ì²˜ë¦¬

- ì‹¤í—˜ìš©ìœ¼ë¡œ ë§Œë“¤ì—ˆë˜ ë ˆí¬ì—ëŠ” ë©”íƒ€ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” `json`ì„ ë§Œë“¤ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
  - ê²€ìƒ‰ë³´ë‹¤ ë” ë§ì€ ìš©ë„ë¥¼ ê°–ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì œê°€ ë©”íƒ€ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì´ìœ ëŠ” ëª¨ë“  ê¸€ì— ë™ì¼í•˜ê²Œ ëœë”ë§ì´ ë˜ì–´ì•¼ í•˜ëŠ” ê²€ìƒ‰ íŒì—… ë•Œë¬¸ì…ë‹ˆë‹¤.
  - `json`ì„ ë§Œë“¤ì–´ì„œ ê²€ìƒ‰ì— ì°¾ë„ë¡ í•œ ëª©ì ì´ ì•„ë‹™ë‹ˆë‹¤. ì§€ê¸ˆì€ ì œê³µì€ í•˜ì§€ë§Œ ìš©ë„ê°€ íŠ¹ë³„íˆ ì—†ìŠµë‹ˆë‹¤.
- ë©”íƒ€ì •ë³´ë¥¼ ì²˜ë¦¬í•  ë•Œ ê¹¨ì§„ ì´ë¯¸ì§€ ë§í¬ë„ ì•Œì•„ë‚´ë„ë¡ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

```ts
// ë©”íƒ€ ì •ë³´ì™€ ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ ë¥¼ ì €ì¥í•  ë§µ (íŒŒì¼ ê²½ë¡œ ê¸°ì¤€)
const contentMap = new Map<string, string>();

// ê¹¨ì§„ ì´ë¯¸ì§€ ë§í¬ ìˆ˜ì§‘ìš© ë°°ì—´
const allBrokenImageLinks: BrokenImageLink[] = [];
const assetDir = join(process.cwd(), 'app', 'asset');

// ë©”íƒ€ ì •ë³´ ì²˜ë¦¬í•˜ê¸°
for (const file of markdownfiles) {
  const content = await readMarkdownFile(file.filePath);
  const { metadata } = processMetaData(content, file.filePath, blogsDir);
  if (metadata.draft) {
    file.isProcessed = true;
    continue;
  }
  // ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ ë„ í•¨ê»˜ ì €ì¥
  const { markdownContent } = splitMetadataAndContent(content);
  contentMap.set(file.filePath, markdownContent);
  metaJson.push(metadata);

  // ì´ë¯¸ì§€ ìœ íš¨ì„± ê²€ì‚¬ (ë¹Œë“œ í›„ distì— ë³µì‚¬ë  ì´ë¯¸ì§€ ê¸°ì¤€)
  const brokenLinks = findBrokenImageLinks(markdownContent, file.filePath, blogsDir, assetDir);
  allBrokenImageLinks.push(...brokenLinks);
}

// ê¹¨ì§„ ì´ë¯¸ì§€ ë§í¬ ì¶œë ¥
reportBrokenImageLinks(allBrokenImageLinks);

// íƒœê·¸ ì •ë³´ ìˆ˜ì§‘ (íƒœê·¸ë³„ ê°œìˆ˜ í¬í•¨)
const tagMap = new Map<string, number>();
metaJson.forEach((meta) => {
  if (meta.tags) {
    meta.tags.forEach((tag) => {
      tagMap.set(tag, (tagMap.get(tag) || 0) + 1);
    });
  }
});

// íƒœê·¸ë¥¼ ë°°ì—´ë¡œ ë³€í™˜ (count í¬í•¨)
const tags = Array.from(tagMap.entries())
  .map(([tag, count]) => ({ name: tag, count }))
  .sort((a, b) => a.name.localeCompare(b.name)); // ì•ŒíŒŒë²³ ìˆœìœ¼ë¡œ ì •ë ¬

// dist/meta.json íŒŒì¼ë¡œ ì“°ê¸°
writeFileSync(join(process.cwd(), 'dist', 'meta.json'), JSON.stringify(metaJson.reverse(), null, 2), 'utf8');

// ê²€ìƒ‰ í…œí”Œë¦¿ ë Œë”ë§
const SearchHtml = render(searchTemplate, { tags, posts: metaJson });
```

- ìµœì¢…ì ìœ¼ë¡œ ë£¨íŠ¸ì— í•´ë‹¹í•˜ëŠ” ì£¼ì†Œë¶€í„° ê° í•˜ìœ„ ì£¼ì†Œê¹Œì§€ `SearchHtml`ì„ ë¬¸ìì—´ë¡œ ì „ë‹¬í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì´ ë¬¸ìì—´ì„ ë§Œë“¤ê¸° ìœ„í•œ ì¼ë ¬ì˜ ê³¼ì •ì…ë‹ˆë‹¤.
- ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ëª©ë¡ì€ `markdownfiles` ë³€ìˆ˜ì— ë‹´ê²¨ìˆìŠµë‹ˆë‹¤.
- `readMarkdownFile`ì€ ë§ˆí¬ë‹¤ìš´ ì£¼ì†Œë¥¼ ì£¼ë©´ í•´ë‹¹íŒŒì¼ì„ ì½ê³  ë¬¸ìì—´ì„ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ì— ë¶ˆê³¼í•©ë‹ˆë‹¤.
- `processMetaData` ë§ˆí¬ë‹¤ìš´ ìƒë‹¨ì˜ yml ë¬¸ë²•ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì½ê³  ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ ë¡œì§ì€ ì˜ì™¸ë¡œ ë³µì¡í–ˆìŠµë‹ˆë‹¤.

```ts
/**
 * metadata íŒŒì‹±
 * í—ˆìš©í•˜ì§€ ì•Šì€ í‚¤ê°€ ìˆìœ¼ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚´
 * í•„ìˆ˜í‚¤ê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚´
 */
export const parseMetadata = (metadata: string) => {
  const metadataObject: Metadata = {};
  const metadataLines = metadata.split('\n');

  let i = 0;
  while (i < metadataLines.length) {
    const line = metadataLines[i].trim();

    // ë¹ˆ ì¤„ ìŠ¤í‚µ
    if (!line) {
      i++;
      continue;
    }

    const colonIndex = line.indexOf(':');
    if (colonIndex === -1) {
      i++;
      continue;
    }

    const key = line.slice(0, colonIndex).trim();
    let value = line.slice(colonIndex + 1).trim();

    // ë°°ì—´ ì²˜ë¦¬
    // 1. valueê°€ ë¹ˆ ë¬¸ìì—´ì´ê³  ë‹¤ìŒ ì¤„ì´ [ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°
    if (value === '' && i + 1 < metadataLines.length) {
      const nextLine = metadataLines[i + 1].trim();
      if (nextLine.startsWith('[')) {
        i++; // ë‹¤ìŒ ì¤„ë¡œ ì´ë™
        value = nextLine;
      }
    }

    if (value.startsWith('[')) {
      // í•œ ì¤„ì— ë°°ì—´ì´ ì™„ì„±ëœ ê²½ìš°
      if (value.endsWith(']')) {
        const arrayString = value.slice(1, -1); // [ ] ì œê±°
        const items = arrayString.split(',').map((item) => {
          const trimmed = item.trim();
          // ì‘ì€ë”°ì˜´í‘œ ì œê±°
          if (trimmed.startsWith("'") && trimmed.endsWith("'")) {
            return trimmed.slice(1, -1);
          }
          return trimmed;
        });
        metadataObject[key] = items;
        i++;
        continue;
      }

      // ì—¬ëŸ¬ ì¤„ì— ê±¸ì³ ìˆëŠ” ë°°ì—´
      let arrayString = value.slice(1); // [ ì œê±°
      i++;
      while (i < metadataLines.length) {
        const nextLine = metadataLines[i].trim();
        arrayString += ` ${nextLine}`;
        if (nextLine.includes(']')) {
          break;
        }
        i++;
      }

      // ë°°ì—´ íŒŒì‹±
      const closingBracketIndex = arrayString.indexOf(']');
      if (closingBracketIndex !== -1) {
        const arrayContent = arrayString.slice(0, closingBracketIndex);
        const items = arrayContent
          .split(',')
          .map((item) => {
            const trimmed = item.trim();
            // ì‘ì€ë”°ì˜´í‘œ ì œê±°
            if (trimmed.startsWith("'") && trimmed.endsWith("'")) {
              return trimmed.slice(1, -1);
            }
            return trimmed;
          })
          .filter((item) => item !== '');
        metadataObject[key] = items;
      }
      i++;
      continue;
    }

    // ì¼ë°˜ ë¬¸ìì—´ ê°’
    // ë”°ì˜´í‘œë¡œ ê°ì‹¸ì§„ ê²½ìš° ì œê±°
    if ((value.startsWith('"') && value.endsWith('"')) || (value.startsWith("'") && value.endsWith("'"))) {
      metadataObject[key] = value.slice(1, -1);
    } else {
      metadataObject[key] = value;
    }
    i++;
  }

  return metadataObject;
};
```

- ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê°™ìŠµë‹ˆë‹¤.
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ í™•ì¸í•´ì•¼ ì½”ë“œë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤ë©´ ê·¸ê²ƒì€ ë‚˜ìœ ì½”ë“œê°€ ë  ê²ƒì…ë‹ˆë‹¤.
- ë³µì¡í•œ ì½”ë“œì— í…ŒìŠ¤íŠ¸ê°€ ì—†ì—ˆë‹¤ë©´ ë” ë‚˜ìœ ì½”ë“œê°€ ë˜ì—ˆì„ ê²ƒì…ë‹ˆë‹¤.

```ts
  it('should return the metadata object with multiple tags', () => {
    const metadata = `title: ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ - 6ì¼ì°¨
authors: [arch-spatula]
tags:
  [
    'blog',
    'wanted',
    'pre-on-boarding',
    'Cannot use import statement outside a module',
    'Jest Mocking',
    'jest',
    'try-catch error type',
  ]
description: ì›í‹°ë“œ ê³¼ì œ ì§„í–‰ê³¼ì •
date: 2023-04-15`;
    const metadataObject = parseMetadata(metadata);
    expect(metadataObject).toEqual({
      title: 'ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ - 6ì¼ì°¨',
      authors: ['arch-spatula'],
      tags: [
        'blog',
        'wanted',
        'pre-on-boarding',
        'Cannot use import statement outside a module',
        'Jest Mocking',
        'jest',
        'try-catch error type',
      ],
      description: 'ì›í‹°ë“œ ê³¼ì œ ì§„í–‰ê³¼ì •',
      date: '2023-04-15',
    });
  });
});
```

- ìœ„ê°€ ê°€ì¥ í•µì‹¬ì ì¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì…ë‹ˆë‹¤. ì œê°€ ì›í•˜ëŠ” ë©”íƒ€ì •ë³´ê°€ ìœ„ì˜ í˜•íƒœë¥¼ ê°€ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
- ê°ê°ì˜ ì…ë ¥ê°’ì„ ê°€ì§€ê³  ë””ë²„ê±°ë¥¼ ì‹¤í–‰í•´ë³´ë©´ ë‚©ë“ì´ ë  ê²ƒì…ë‹ˆë‹¤.

### ê²€ìƒ‰ í…œí”Œë¦° ëœë”ë§

```html
<div id="search-popup">
  <div id="popup-container">
    <form id="search-form">
      <img id="search-icon" src="/search.svg" alt="search" /><input
        id="search-input"
        type="search"
        name="search-input"
        placeholder="Search"
        autocomplete="off"
      />
      <div></div>
    </form>
    <ul id="search-tag-list">
      {{#each tags}}
      <li class="search-tag-item">
        <a class="tag-link" href="#" data-tag="{{name}}">#{{name}} - {{count}}</a>
      </li>
      {{/each}}
    </ul>
    <ul id="search-blog-list">
      {{#each posts}}
      <li class="search-item">
        <a href="{{filePath}}" class="search-item-link">{{title}}</a>
      </li>
      {{/each}}
    </ul>
  </div>
</div>
<div id="overlay"></div>
```

- ìœ„ í…œí”Œë¦¿ì€ ëª¨ë“  html íŒŒì¼ë³„ë¡œ ë¶™ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

## íŒŒì¼ ì½ê¸°

- ì´ˆì•ˆì—ëŠ” ë‹¨ í•œë²ˆì˜ ë””ìŠ¤í¬ ioë¡œ ì²˜ë¦¬ ê°€ëŠ¥í•  ê²ƒì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê²€ìƒ‰ ê¸°ëŠ¥ì„ ë„£ê¸° ìœ„í•´ ê° ê¸€ì˜ ë©”íƒ€ ì •ë³´ë¥¼ ëª¨ë‘ ë°›ê³  ë©”íƒ€ì •ë³´ë¥¼ ëª¨ë‘ ê³µìœ í•˜ê²Œ í•´ì£¼ë ¤ë©´ ê²°êµ­ ë””ìŠ¤í¬ ioë¥¼ ë‘ë²ˆ í•  ìˆ˜ ë°–ì— ì—†ì—ˆìŠµë‹ˆë‹¤.
- ì‘ì—…ì²˜ë¦¬ë¥¼ í•  ë•Œ ì–´ëŠì •ë„ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°–ê²Œ ë§Œë“¤ê³ ì í–ˆìŠµë‹ˆë‹¤.
  - ê°€ì¥ ë¨¼ì € ì²˜ë¦¬í•˜ëŠ” ë‹¨ê³„ëŠ” ì´ˆê¸°í™” ë‹¨ê³„ì…ë‹ˆë‹¤. ì‹¤ì§ˆì ì¸ ë‹¨ê³„ë¼ê³  ì¹˜ê¸°ì— ì• ë§¤í•©ë‹ˆë‹¤.
    - ë©”íƒ€ì •ë³´ë¥¼ ë‹´ì„ ë°°ì—´ì„ ì„ ì–¸í•©ë‹ˆë‹¤.
    - í…œí”Œë¦¿ìœ¼ë¡œ í™œìš©í•  html íŒŒì¼ì„ ì½ìŠµë‹ˆë‹¤.
    - distë¥¼ í•œë²ˆ ë¹„ì›Œë²„ë¦½ë‹ˆë‹¤.
    - ëª¨ë“  html íŒŒì¼ë“¤ì´ ì‚¬ìš©í•  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤. `index.ts`ê°€ í•´ë‹¹í•©ë‹ˆë‹¤.
  - ì²«ë²ˆì§¸ëŠ” ì²˜ë¦¬í•´ì•¼í•  ì‘ì—…ë“¤ì„ ëª©ë¡ìœ¼ë¡œ ì •ë¦¬í•´ì£¼ëŠ” ì‘ì—…ì…ë‹ˆë‹¤. ì´ê²ƒì€ íŒŒì¼ì˜ ë‚´ìš©ì´ ì•„ë‹ˆë¼ íŒŒì¼ë“¤ì˜ ì£¼ì†Œë¥¼ ì•Œì•„ë‚´ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.
    - ì—¬ê¸°ì„œ `listUpMarkdownFiles.ts`ë¥¼ í˜¸ì¶œí•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤.
  - ë‘ë²ˆì§¸ëŠ” ê° íŒŒì¼ì˜ ì£¼ì†Œë¥¼ í™œìš©í•´ ë©”í‹°ì •ë³´ë¥¼ ì–»ê³  ì½˜í…ì¸ ë¥¼ ì–»ì–´ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    - íŒŒì¼ì„ ì½ê³  ì²˜ë¦¬í•˜ê³  ì“°ê¸°ë§Œí•˜ë©´ ë  ê²ƒì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.
    - ì‹¤ì œë¡œ í•œ ê²ƒì€ íŒŒì¼ì„ ì½ê³  ë©”íƒ€ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë¬¸ìì—´ë„ ì´ë•Œ ì €ì¥í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— Mapì˜ ì‚¬ì´ì¦ˆê°€ ë„ˆë¬´ ì»¤ì ¸ì„œ ë¬¸ì œê°€ ëœë‹¤ë©´ ì €ì¥ ì•ˆ í•˜ê³  íŒŒì¼ ì½ê¸°ë¥¼ 1ë²ˆë” í•  ê²ƒì…ë‹ˆë‹¤.
- blogs í´ë” ë‚´ì—ì„œ ëª¨ë“  ë§ˆí¬ë‹¤ìš´ íŒŒì¼ë“¤ê³¼ íŒŒì¼ì´ ì†í•œ í´ë” ì£¼ì†Œë¥¼ ì•Œì•„ë‚´ëŠ” ê²ƒì´ 1ë‹¨ê³„ì…ë‹ˆë‹¤.
  - ì—¬ê¸°ì„œëŠ” ëª¨ë“  ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ëª©ë¡ë“¤ì„ ì•Œì•„ë‚´ì•¼ í•©ë‹ˆë‹¤.
  - í…œí”Œë¦¿ë“¤ì„ ëª¨ë‘ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
- 2ë‹¨ê³„ëŠ” íŒŒì¼ê³¼ í´ë” ì£¼ì†Œë¥¼ í™œìš©í•´ì„œ 3ë‹¨ê³„ ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤.
  - ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ì½ìŠµë‹ˆë‹¤.
  - ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    - ê°€ì¥ ë§ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì—¬ê¸°ì— ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
    - í…œí”Œë¦¿ë“¤ì„ ì½ê³  ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
  - ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ HTMLë¡œ ì €ì¥í•©ë‹ˆë‹¤.
    - ì²˜ë¦¬ê°€ ì™„ë£Œëœ htmlì€ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
      - ë©”íƒ€ì •ë³´ë„ htmlì˜ headerë¡œ í™œìš©í•©ë‹ˆë‹¤.
    - ë©”íƒ€ì •ë³´ë¥¼ í™œìš©í•´ì„œ jsonìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
- ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ê³„í•  ë•Œ ê²½ê³„ë¥¼ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì¤‘ìš”í•œ í™œë™ì´ ë©ë‹ˆë‹¤.

### í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•  ë¡œì§

- í˜ì´ì§€ë¥¼ ë¡œë”©í•˜ê³  ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.
- ì´ë²ˆì—ëŠ” ìƒíƒœë¥¼ ìµœëŒ€í•œ urlì— ë„£ì—ˆìŠµë‹ˆë‹¤.

## ë¹Œë“œ ì‹œì ì— ì²˜ë¦¬í•˜ëŠ” íŠ¹ìˆ˜í•œ ë¡œì§

### ê¹¨ì¸ ì´ë¯¸ì§€ ì•Œì•„ë‚´ê¸°

- ì´ë¯¸ì§€ ë§í¬ê°€ ê¹¨ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì„ í…ŒìŠ¤íŠ¸ë¡œë„ ì•Œì•„ë‚¼ ìˆ˜ ìˆì§€ë§Œ ë¹Œë“œ ì‹œì ì— ë¨¼ì € ì•Œì•„ë‚´ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤ê³  ë³´ê³  ë„£ì—ˆìŠµë‹ˆë‹¤.
- ì§€ê¸ˆ ë§ˆí¬ë‹¤ìš´íŒŒì¼ê³¼ ì´ë¯¸ì§€ë¥¼ ê°™ì€ í´ë” ë‚´ì— ë„£ëŠ” êµ¬ì¡°ë©´ ì´ëŸ° ì‹¤ìˆ˜í•  ì—¬ì§€ê°€ ìƒë‹¹íˆ ë‚®ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë§Œì•½ì— ë°œìƒí•œë‹¤ë©´ ë°©ì§€ë¥¼ í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤ê³  ë´¤ìŠµë‹ˆë‹¤.
- ì´ ê¸€ì„ ì“°ëŠ” ì‹œì ì—ì„œëŠ” ì˜¤íˆë ¤ í•„ìš”ì—†ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```ts
/**
 * ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ ì—ì„œ ê¹¨ì§„ ì´ë¯¸ì§€ ë§í¬ë¥¼ ì°¾ëŠ” í•¨ìˆ˜
 *
 * @param markdownContent - ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ 
 * @param markdownFilePath - ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì˜ ì ˆëŒ€ ê²½ë¡œ
 * @param blogsDir - blogs ë””ë ‰í† ë¦¬ ê²½ë¡œ
 * @param assetDir - app/asset ë””ë ‰í† ë¦¬ ê²½ë¡œ
 * @returns ê¹¨ì§„ ì´ë¯¸ì§€ ë§í¬ ë°°ì—´
 *
 * @example
 * const brokenLinks = findBrokenImageLinks(content, '/path/to/blog.md', '/path/to/blogs', '/path/to/app/asset');
 */
export const findBrokenImageLinks = (
  markdownContent: string,
  markdownFilePath: string,
  blogsDir: string,
  assetDir: string,
): BrokenImageLink[] => {
  const images = extractImageLinks(markdownContent);
  const brokenLinks: BrokenImageLink[] = [];

  for (const { alt, src } of images) {
    if (!checkImageExists(src, markdownFilePath, blogsDir, assetDir)) {
      brokenLinks.push({
        alt,
        src,
        markdownFilePath,
      });
    }
  }

  return brokenLinks;
};
```

- ì½”ë“œë¥¼ í•˜ì´ë ˆë²¨ë¡œ ë³´ë©´ ê·¹ë„ë¡œ ë‹¨ìˆœí•©ë‹ˆë‹¤.

### code block syntax highlighting

- ì½”ë“œ ë¸”ëŸ­ì„ ì‹¤ì œë¡œ ë³´ê³  ì½ê³  ì´í•´ë¥¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤, ì—°ì‚°ì ë“± ëˆˆìœ¼ë¡œ ë³´ê³  êµ¬ë³„ì´ ì•ˆ ë˜ë©´ ê°€ë…ì„±ì„ ë–¨ì–´ì§€ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.
- ì½”ë“œ ë¸”ëŸ­ì„ ê·¸ëƒ¥ ë³´ì—¬ì£¼ë©´ ìƒë‹¹íˆ ê°„ì§€ê°€ ì•ˆ ë‚©ë‹ˆë‹¤.
- ê°€ëŠ¥í•˜ë©´ ìµœëŒ€í•œ ë¹Œë“œ ì‹œì ì— ì²˜ë¦¬ë˜ê²Œ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤.
  - ìœ ì €ëŠ” ìµœëŒ€í•œ ì˜ì¡´ì„±ì´ ì—†ëŠ” ìˆœìˆ˜í•œ html ìœ„ì£¼ë¡œ ì „ë‹¬ë°›ì•„ì•¼ í•œë‹¤ê³  ë³´ê³  ìˆìŠµë‹ˆë‹¤.
- https://shiki.style/
  - nuxt contentê°€ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
  - ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ ë„ì…í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì²˜ìŒ ìƒê°ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•´ì¤˜ì•¼ í•˜ëŠ” ì˜ì¡´ì„±ì¸ê°€? í–ˆëŠ”ë° ë¹Œë“œ ì‹œì ìœ¼ë¡œ ê°œë°œ ì˜ì¡´ì„œìœ¼ë¡œ ì‚¬ìš©í•´ë„ ì¶©ë¶„í–ˆìŠµë‹ˆë‹¤.

## ë°”ë€ github action

- ì´ì „ì— nuxtë¡œ ì‘ì„±í–ˆë˜ ymlì„ ë‹¤ì‹œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ~~íŠ¸ë˜í”½ë„ ì—†ëŠ” ë¸”ë¡œê·¸ ì£¼ì œì— í•œë²ˆì— ì˜ ì‘ì„±í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.~~
- https://ko.vite.dev/guide/static-deploy ë„ ì°¸ê³ í•˜ê¸°ëŠ” í–ˆìŠµë‹ˆë‹¤.
- ChatGPTì—ê²Œ ì´ˆì•ˆ ì‘ì„±ì„ ìš”êµ¬í–ˆì§€ë§Œ RAG ëª¨ë¸ì´ ì•„ë‹ˆë¼ì„œ ì‹ ë¢°í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¢‹ì€ ì´ˆì•ˆì€ ë§ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
- ì´ì§“ ê±°ë¦¬ë¥¼ í•  ë•Œ ì¯¤ì— Opusì— ë¹ ë¥¸ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” í† í°ì„ ì†Œì§„í–ˆìŠµë‹ˆë‹¤. í•œí¸ìœ¼ë¡œ ë‹¤í–‰ì…ë‹ˆë‹¤. ëˆì„ ë” ì“°ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë“¤ë•Œê°€ ìˆìŠµë‹ˆë‹¤.

```yml
# https://github.com/actions/deploy-pages#usage
name: Deploy to GitHub Pages
on:
  workflow_dispatch:
  push:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: corepack enable
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      # Pick your own package manager and build script
      - run: pnpm install
      - run: pnpm generate --preset github_pages
      - run: touch .output/public/.nojekyll
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./.output/public
  # Deployment job
  deploy:
    # Add a dependency to the build job
    needs: build
    # Grant GITHUB_TOKEN the permissions required to make a Pages deployment
    permissions:
      pages: write # to deploy to Pages
      id-token: write # to verify the deployment originates from an appropriate source
    # Deploy to the github_pages environment
    environment:
      name: github_pages
      url: ${{ steps.deployment.outputs.page_url }}
    # Specify runner + deployment step
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

- ì´ê²Œ ê¸°ì¡´ì— ì‘ì„±ë˜ì–´ ìˆë˜ ë°°í¬ ymlì…ë‹ˆë‹¤.
- nuxtì™€ ê´€ë ¨ëœ ë‚´ìš©ì„ ì œê±°í•˜ê³  ìˆœìˆ˜í•˜ê²Œ node.js ì •ë„ë§Œ ë‚¨ê²¨ì•¼ í•©ë‹ˆë‹¤.
- ì‘ë…„ì— ì‘ì—…í•˜ê³  ë‚´ìš©ì„ ë„ˆë¬´ ë§ì´ ê¹Œë¨¹ì–´ì„œ ë‹¤ì‹œ ì°¾ì•„ ë´ì•¼ í•©ë‹ˆë‹¤.

```yml
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: pages
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 24
          cache: pnpm

      - name: Setup pnpm
        uses: pnpm/action-setup@v4
        with:
          version: 9

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Build
        run: pnpm run build

      - name: Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: dist

  deploy:
    runs-on: ubuntu-latest
    needs: build
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

- ì´ë²ˆì— í•´ë³¼ í™œë™ì€ ë¼ì¸ë°”ì´ ë¼ì¸ìœ¼ë¡œ í•´ì„í•˜ëŠ” ê²ƒì„ ì‹œë„í•  ê²ƒì…ë‹ˆë‹¤.

### actions/checkoutì€ ë¬´ì—‡ì¸ê°€?

- `actions/checkout@v4`ì´ ë¬´ìŠ¨ ì˜ë¯¸ì¸ì§€ ëª°ë¼ ê²€ìƒ‰í–ˆìŠµë‹ˆë‹¤.
- https://www.daleseo.com/github-actions-checkout/

```sh
git init # ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ë¡œì»¬ ì €ì¥ì†Œë¡œ ë§Œë“ ë‹¤.
git config # ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°ì¢… ì¸ì¦ ê´€ë ¨ ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤
git fetch # ëª…ë ¹ì–´ë¥¼ í†µí•´ ì›ê²© ì €ì¥ì†Œë¡œ ë¶€í„° ì½”ë“œë¥¼ ë°›ì•„ì˜¨ë‹¤.
git checkout # ëª…ë ¹ì–´ë¥¼ í†µí•´ ì£¼(main) ë¸Œëœì¹˜ë¡œ ì „í™˜í•œë‹¤.
git log # ëª…ë ¹ì–´ë¡œ ë§ˆì§€ë§‰ ì»¤ë°‹(commit)ì˜ í•´ì‹œê°’ì„ í™•ì¸í•œë‹¤.
```

- ìœ„ì— í•´ë‹¹í•˜ëŠ” ëª…ë ¹ë“¤ì„ ì‹¤í–‰í•œë‹¤ê³  í•©ë‹ˆë‹¤. ì§€ê¸ˆ ë³´ì—¬ì£¼ëŠ” ê²ƒì€ ê°„ëµí•œ ë²„ì „ì¼ ê²ƒì…ë‹ˆë‹¤.
- `actions/setup-node@v4`ì¸ë° ì´ê²ƒì´ ê²€ìƒ‰ì„ í•˜ë©´ì„œ ë‹¤ìŒ ë‚´ìš©ë“¤ì„ ì•Œì•„ëƒˆìŠµë‹ˆë‹¤.
  - https://github.com/marketplace/actions/setup-node-js-environment
  - https://github.com/actions/setup-node

```yml
- uses: actions/checkout@v5
- uses: actions/setup-node@v6
  with:
    node-version: 24
```

- `READMD.md`ì— í™•ì¸í•œ ì‹œì ì—ëŠ” ìœ„ë¥¼ ì˜ˆì‹œë¡œ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤.
- ìœ„ì²˜ëŸ¼ í•˜ë©´ ì¼ë‹¨ node.jsì™€ npmì´ ì„¤ì¹˜ ë©ë‹ˆë‹¤.

```yml
on:
  - push
  - pull_request

jobs:
  cache-and-install:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - uses: pnpm/action-setup@v4
        name: Install pnpm
        with:
          version: 10
          cache: true

      - name: Install dependencies
        run: pnpm install
```

- https://github.com/pnpm/action-setup
- https://github.com/marketplace/actions/setup-pnpm
- ìœ„ì— ì•Œë ¤ì¤€ ë²„ì „ì„ ì‚¬ìš©í•˜ë©´ pnpm 10 ë²„ì „ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

 -->
