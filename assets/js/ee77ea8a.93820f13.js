"use strict";(self.webpackChunkarch_spatula_github_io=self.webpackChunkarch_spatula_github_io||[]).push([[11957],{3905:(e,n,t)=>{t.d(n,{Zo:()=>i,kt:()=>d});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},i=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},m="mdxType",k={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),m=c(t),u=a,d=m["".concat(l,".").concat(u)]||m[u]||k[u]||o;return t?r.createElement(d,s(s({ref:n},i),{},{components:t})):r.createElement(d,s({ref:n},i))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=u;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[m]="string"==typeof e?e:a,s[1]=p;for(var c=2;c<o;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},36676:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>k,frontMatter:()=>o,metadata:()=>p,toc:()=>c});var r=t(87462),a=(t(67294),t(3905));const o={sidebar_position:7,description:"Worker",tags:["Worker"]},s="Worker",p={unversionedId:"worker",id:"worker",title:"Worker",description:"Worker",source:"@site/js-ts-cookbook/worker.md",sourceDirName:".",slug:"/worker",permalink:"/js-ts-cookbook/worker",draft:!1,tags:[{label:"Worker",permalink:"/js-ts-cookbook/tags/worker"}],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,description:"Worker",tags:["Worker"]},sidebar:"tutorialSidebar",previous:{title:"json-server",permalink:"/js-ts-cookbook/json-server"}},l={},c=[],i={toc:c},m="wrapper";function k(e){let{components:n,...t}=e;return(0,a.kt)(m,(0,r.Z)({},i,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"worker"},"Worker"),(0,a.kt)("iframe",{class:"codepen",src:"https://www.youtube.com/embed/-JE8P2TiJEg",title:"PROOF JavaScript is a Multi-Threaded language",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.kt)("p",null,"\uc5b8\uc820\uac00 \ub2e4\ub904\ubcf4\uace0 \uc2f6\uc5c8\ub294\ub370 \ub354 \uc27d\uac8c fireship\uc774 \uc800 \ub300\uc2e0 \ub2e4\ub8e8\uc5b4\uc92c\uc2b5\ub2c8\ub2e4."),(0,a.kt)("p",null,"Node.js, \ud06c\ub86c \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uc608\uc804\uc5d0 Deno\ub294 \uac1c\ubc1c\ud658\uacbd\uc5d0\uc11c \uc9c0\uc6d0\ud558\ub294\ub370 Deno Deploy \ubc30\ud3ec\ud658\uacbd\uc5d0\uc11c \uc9c0\uc6d0 \uc548\ud574\uc11c \uace0\uc0dd\ud588\ub358 \uae30\uc5b5\uc774 \ub0a9\ub2c8\ub2e4."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/ko/docs/Web/API/Worker#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80_%ED%98%B8%ED%99%98%EC%84%B1"},"Worker - MDN")),(0,a.kt)("p",null,"Worker\uc758 \ub2e8\uc21c\ud55c \uae30\ub2a5\uc740 \ub2e4\uc591\ud55c \ube0c\ub77c\uc6b0\uc800\uc5d0 \ud638\ud658\ub418\uae30 \ub54c\ubb38\uc5d0 \uc544\uc8fc \ud070 \ubb38\uc81c\ub294 \uc5c6\uc2b5\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc2f1\uae00\uc4f0\ub808\ub4dc \uc5b8\uc5b4\ub77c\uace0 \ud558\uba74 \uc57d\uac04\uc758 \uc5b4\ud3d0\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc694\uccad, IO\ub97c \uc81c\uc678\ud558\uace0 \uc77c\ubc18\uc801\uc73c\ub85c \uacc4\uc0b0\uc774 \ub85c\uc9c1\uc0c1 \ud074 \uc218 \ubc16\uc5d0 \uc5c6\ub294 \uacbd\uc6b0 \uc720\uc6a9\ud569\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uacc4\uc0b0\ube44\uc6a9\uc774 \ube44\uc2fc \uacbd\uc6b0 \ub300\ud45c\uc801\uc778 \uc608\uc2dc \uc911 \ud558\ub098\ub294 \uc554\ud638\ud559\uc785\ub2c8\ub2e4. \ubc18\ub4dc\uc2dc \uc81c\uacf1\uc2dc\uac04 \ubcf5\uc7a1\uc131(Quadratic Time Complexity, ",(0,a.kt)("span",{parentName:"p",className:"math math-inline"},(0,a.kt)("span",{parentName:"span",className:"katex"},(0,a.kt)("span",{parentName:"span",className:"katex-mathml"},(0,a.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,a.kt)("semantics",{parentName:"math"},(0,a.kt)("mrow",{parentName:"semantics"},(0,a.kt)("mi",{parentName:"mrow"},"O"),(0,a.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,a.kt)("msup",{parentName:"mrow"},(0,a.kt)("mi",{parentName:"msup"},"n"),(0,a.kt)("mn",{parentName:"msup"},"2")),(0,a.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,a.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"O(n^{2})")))),(0,a.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,a.kt)("span",{parentName:"span",className:"base"},(0,a.kt)("span",{parentName:"span",className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,a.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O"),(0,a.kt)("span",{parentName:"span",className:"mopen"},"("),(0,a.kt)("span",{parentName:"span",className:"mord"},(0,a.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,a.kt)("span",{parentName:"span",className:"msupsub"},(0,a.kt)("span",{parentName:"span",className:"vlist-t"},(0,a.kt)("span",{parentName:"span",className:"vlist-r"},(0,a.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,a.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,a.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,a.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,a.kt)("span",{parentName:"span",className:"mord mtight"},(0,a.kt)("span",{parentName:"span",className:"mord mtight"},"2"))))))))),(0,a.kt)("span",{parentName:"span",className:"mclose"},")"))))),")\uc744 \uac00\uc9c8 \uc218 \ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\ub4e4\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ub85c\uc9c1\uc740 \ubb34\uc870\uac74 \uace0\uc815\ub420 \uc218 \ubc16\uc5d0 \uc5c6\ub2e4\uba74 \ud65c\uc6a9\ud574\ubcfc \uc218 \uc788\ub294 \uc804\ub7b5\uc785\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uc9c0\uae08\ubd80\ud130 \uc57d\uac04\uc758 \ucef4\ud4e8\ud130\uacfc\ud559 \uc9c0\uc2dd\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub3d9\uc2dc\uc131\uacfc \ubcd1\ub82c\uc131\uc744 \uad6c\ubd84\ud574\uc57c \ud569\ub2c8\ub2e4. \ucc98\uc74c\ubcf4\uba74 \ube44\uc2b7\ud574\ubcf4\uc785\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \ub2f9\uc5f0\ud788 \uc544\uc8fc \ub2e4\ub985\ub2c8\ub2e4."),(0,a.kt)("p",null,"\ub3d9\uc2dc\uc131\uc740 \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uac00 \ub17c\ube14\ub7ec\ud0b9 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub85c \uc798 \ucc98\ub9ac\ud574\uc90d\ub2c8\ub2e4. \ucc98\ub9ac\uac00 \uc644\ub8cc\ub418\uace0 Call Stack\uc774 \ube44\uc5b4\uc788\uc744 \ub54c Task Queue\uc5d0\uc11c Promise\ubd80\ud130 dequeue\ud558\uace0 Call Stack\uc73c\ub85c Push\ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \ud574\ub3c4 \uacb0\uad6d \uacc4\uc0b0\ud558\uae30 \uc704\ud574 \ud65c\uc6a9\ud558\ub294 \uc4f0\ub808\ub4dc\ub294 1\uac1c\uc785\ub2c8\ub2e4. \uc4f0\ub808\ub4dc 1\uac1c\ub97c \uc791\uc5c5 \uc21c\uc11c\ub97c \ubc14\uafb8\uba74\uc11c \ub354\uc6b1\ub354 \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30\ub9cc \ud55c \uac83\uc785\ub2c8\ub2e4."),(0,a.kt)("p",null,"\ubcd1\ub82c\uc131 \uac19\uc740 \uacbd\uc6b0\uc5d0\ub294 \uacc4\uc0b0\uc744 \ucc98\ub9ac\ud558\ub294 CPU \ucf54\uc5b4 \uc5ec\ub7ec\uac1c\ub97c \uc811\uadfc\ud558\ub294 \uac83\uc785\ub2c8\ub2e4. \uc4f0\ub808\ub4dc\ub97c \uc5ec\ub7ec\uac1c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uac83\uc785\ub2c8\ub2e4. \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uc758 \uacbd\uc6b0 \ud558\ub098\uc758 \ud504\ub85c\uc138\uc2a4 \ub0b4\ubd80\uc5d0\uc11c \ubaa8\ub450 \ub3d9\uc77c\ud55c \uc4f0\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4 \ub0b4\ubd80\uc5d0\uc11c \uc4f0\ub808\ub4dc\ub97c \uc5ec\ub7ec\uac1c \uc4f0\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uc774\uc81c \ucf54\ub4dc \uc608\uc2dc\uc785\ub2c8\ub2e4. node.js \ud658\uacbd\uc5d0\uc11c \uc791\uc131\ud55c \ucf54\ub4dc\uc785\ub2c8\ub2e4."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.js"',title:'"index.js"'},"const jobs = Array.from({ length: 100 }, () => 1e9);\n\nconst tick = performance.now();\n\nfor (const job of jobs) {\n  let count = 0;\n  for (let i = 0; i < job; i++) {\n    count += 1;\n  }\n}\n\nconst tock = performance.now();\n\nconsole.log(`\uc18c\uc694\uc2dc\uac04: ${tock - tick}ms`);\n// \uc18c\uc694\uc2dc\uac04: 58577.20620799996ms\n")),(0,a.kt)("p",null,"\uc800\ub294 \ub9e5\ubd81 m2\ub97c \uc0ac\uc6a9\ud558\ub294\ub370 fireship\uc758 i9 \uc778\ud154\uc774 \ub354 \ube60\ub985\ub2c8\ub2e4. \u3142\u3137\u3142\u3137"),(0,a.kt)("p",null,"\uc9c0\uae08 \uc608\uc2dc\ub294 \ucf54\ub4dc\uc758 \uc2f1\uae00\uc4f0\ub808\ub4dc\ub85c \ucc98\ub9ac\ud588\uc744 \ub54c \uc131\ub2a5\uc785\ub2c8\ub2e4. \uc55e\uc73c\ub85c Worker\ub97c \ud65c\uc6a9\ud558\ub294 \uc608\uc2dc\ub97c \ubcf4\uc5ec\uc8fc\uaca0\uc2b5\ub2c8\ub2e4."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.js"',title:'"index.js"'},"const { Worker } = require('worker_threads');\n\nconst jobs = Array.from({ length: 100 }, () => 1e9);\n\n/**\n * @param {number} jobs\n * @param {number} concurrentWorkers\n */\nfunction run(jobs, concurrentWorkers) {\n  const chunks = chunkify(jobs, concurrentWorkers);\n\n  const tick = performance.now();\n  let completedWorkers = 0;\n\n  chunks.forEach((data, i) => {\n    const worker = new Worker('./worker.js');\n    completedWorkers += 1;\n    worker.postMessage(data);\n    worker.on('message', (data) => {\n      // \uc5ec\uae30\uc11c worker \ubaa8\ub4c8\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc62c \ub54c\ub294 on\uc5d0\uc11c message\uc5d0\uc11c \uc811\uadfc\ud569\ub2c8\ub2e4.\n      console.log(`${i} ${data} \uc644\ub8cc`);\n      if (completedWorkers === concurrentWorkers) {\n        const tock = performance.now();\n        console.log(`\uc18c\uc694\uc2dc\uac04: ${tock - tick}ms`);\n      }\n      process.exit();\n      // worker\ub294 \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \ub2e4\ub978 \uc4f0\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uadf8\ub798\uc11c \ud504\ub85c\uc138\uc2a4\ub97c \uc885\ub8cc\uc2dc\ucf1c\uc57c \ud569\ub2c8\ub2e4.\n    });\n  });\n}\n\n/**\n * @param {any[]} arr\n * @param {number} n\n */\nfunction chunkify(arr, n) {\n  let chunk = [];\n  for (let i = n; i > 0; i--) {\n    chunk.push(arr.splice(0, Math.ceil(arr.length / i)));\n  }\n  return chunk;\n}\n\nrun(jobs, 4);\n// \uc18c\uc694\uc2dc\uac04: 15889.809874999337ms\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="worker.js"',title:'"worker.js"'},"const { parentPort } = require('worker_threads');\n\nparentPort.on('message', (jobs) => {\n  for (const job of jobs) {\n    let count = 0;\n    for (let i = 0; i < job; i++) {\n      count += 1;\n    }\n  }\n  parentPort.postMessage('done');\n  // \uba54\uc778 \uc4f0\ub808\ub4dc(?)\ub85c worker\uc5d0\uc11c \uacc4\uc0b0\ud55c \ub370\uc774\ud130\ub97c \ubcf4\ub0c5\ub2c8\ub2e4.\n  // \uc800\ub294 \uadf8\ub0e5 \"done\"\uc744 \uc804\ub2ec\ud569\ub2c8\ub2e4.\n});\n")),(0,a.kt)("p",null,"\uc57d\uac04 \uc8fc\uc758\ud560 \ubd80\ubd84\ub4e4\ub3c4 \uc788\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4. \ucef4\ud4e8\ud130\uacfc\ud559 \uae30\ubcf8 \uc9c0\uc2dd\uc73c\ub85c \uc0dd\uac01\ud574\ubcf4\uba74 \uc774\ub7f0 \ubb38\uc81c \ud574\uacb0\ubc29\ubc95\uc740 \uacf5\uac04\ubcf5\uc7a1\uc131\uc744 \uc9c0\ubd88\ud558\uace0 \uc2dc\uac04\ubcf5\uc7a1\uc131\uc744 \ud655\ubcf4\ud569\ub2c8\ub2e4. \uc6b0\ub9ac\uac00 \ub9cc\ub4e0 \uc11c\ube44\uc2a4\uac00 \ub300\uc751\ud560 \ub514\ubc14\uc774\uc2a4 \ubb38\uc81c\uc785\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\uc758 CPU \ucf54\uc5b4\uac00 \uc2f1\uae00 \ucf54\uc5b4\uc778 \uc0ac\uc6a9\uc790\ub3c4 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub9c9\uc57d\uc5d0 \uc774\ub7f0 \uc720\uc800\ub97c \ud0c0\uac9f \uc720\uc800\uc774\uace0 \ub300\ubd80\ubd84 \uc720\uc800\ub85c \uc124\uc815\ud558\uace0 \uc11c\ube44\uc2a4\ub97c \uac1c\ubc1c\ud55c\ub2e4\uba74 \uc790\uc81c\ud574\uc57c \ud560 \ubc29\ubc95\uc785\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uc77c\ub2e8 \ucf54\uc5b4\ub97c 4\uac1c \ud65c\uc6a9\ud558\ub2c8\uae4c \uc2dc\uac04\ub3c4 1/4 \ube44\uc2b7\ud558\uac8c \uac10\uc18c\ud588\uc2b5\ub2c8\ub2e4. \ubb3c\ub860 \uacf5\uac04\ubcf5\uc7a1\uc131\uc740 4\ubc30\ub85c \ub298\uc5b4\ub0ac\uc2b5\ub2c8\ub2e4."))}k.isMDXComponent=!0}}]);