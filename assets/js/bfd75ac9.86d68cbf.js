"use strict";(self.webpackChunkarch_spatula_github_io=self.webpackChunkarch_spatula_github_io||[]).push([[78013],{23464:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var r=s(85893),o=s(11151);const t={sidebar_position:7,description:"Worker",tags:["Worker"]},a="Worker",c={id:"api/worker",title:"Worker",description:"Worker",source:"@site/js-ts-cookbook/05-api/worker.md",sourceDirName:"05-api",slug:"/api/worker",permalink:"/js-ts-cookbook/api/worker",draft:!1,unlisted:!1,tags:[{label:"Worker",permalink:"/js-ts-cookbook/tags/worker"}],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,description:"Worker",tags:["Worker"]},sidebar:"tutorialSidebar",previous:{title:"\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ud2b9\uc218 API",permalink:"/js-ts-cookbook/api/intro"},next:{title:"\ud14c\uc2a4\ud2b8",permalink:"/js-ts-cookbook/category/\ud14c\uc2a4\ud2b8"}},i={},l=[];function m(e){const n={a:"a",annotation:"annotation",code:"code",del:"del",h1:"h1",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"worker",children:"Worker"}),"\n",(0,r.jsx)("iframe",{class:"codepen",src:"https://www.youtube.com/embed/-JE8P2TiJEg",title:"PROOF JavaScript is a Multi-Threaded language",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),"\n",(0,r.jsx)(n.p,{children:"\uc5b8\uc820\uac00 \ub2e4\ub904\ubcf4\uace0 \uc2f6\uc5c8\ub294\ub370 \ub354 \uc27d\uac8c fireship\uc774 \uc800 \ub300\uc2e0 \ub2e4\ub8e8\uc5b4\uc92c\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"Node.js, \ud06c\ub86c \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uc608\uc804\uc5d0 Deno\ub294 \uac1c\ubc1c\ud658\uacbd\uc5d0\uc11c \uc9c0\uc6d0\ud558\ub294\ub370 Deno Deploy \ubc30\ud3ec\ud658\uacbd\uc5d0\uc11c \uc9c0\uc6d0 \uc548\ud574\uc11c \uace0\uc0dd\ud588\ub358 \uae30\uc5b5\uc774 \ub0a9\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/ko/docs/Web/API/Worker#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80_%ED%98%B8%ED%99%98%EC%84%B1",children:"Worker - MDN"})}),"\n",(0,r.jsx)(n.p,{children:"Worker\uc758 \ub2e8\uc21c\ud55c \uae30\ub2a5\uc740 \ub2e4\uc591\ud55c \ube0c\ub77c\uc6b0\uc800\uc5d0 \ud638\ud658\ub418\uae30 \ub54c\ubb38\uc5d0 \uc544\uc8fc \ud070 \ubb38\uc81c\ub294 \uc5c6\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc2f1\uae00\uc4f0\ub808\ub4dc \uc5b8\uc5b4\ub77c\uace0 \ud558\uba74 \uc57d\uac04\uc758 \uc5b4\ud3d0\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc694\uccad, IO\ub97c \uc81c\uc678\ud558\uace0 \uc77c\ubc18\uc801\uc73c\ub85c \uacc4\uc0b0\uc774 \ub85c\uc9c1\uc0c1 \ud074 \uc218 \ubc16\uc5d0 \uc5c6\ub294 \uacbd\uc6b0 \uc720\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(n.p,{children:["\uacc4\uc0b0\ube44\uc6a9\uc774 \ube44\uc2fc \uacbd\uc6b0 \ub300\ud45c\uc801\uc778 \uc608\uc2dc \uc911 \ud558\ub098\ub294 \uc554\ud638\ud559\uc785\ub2c8\ub2e4. \ubc18\ub4dc\uc2dc \uc81c\uacf1\uc2dc\uac04 \ubcf5\uc7a1\uc131(Quadratic Time Complexity, ",(0,r.jsxs)(n.span,{className:"katex",children:[(0,r.jsx)(n.span,{className:"katex-mathml",children:(0,r.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(n.semantics,{children:[(0,r.jsxs)(n.mrow,{children:[(0,r.jsx)(n.mi,{children:"O"}),(0,r.jsx)(n.mo,{stretchy:"false",children:"("}),(0,r.jsxs)(n.msup,{children:[(0,r.jsx)(n.mi,{children:"n"}),(0,r.jsx)(n.mn,{children:"2"})]}),(0,r.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,r.jsx)(n.annotation,{encoding:"application/x-tex",children:"O(n^{2})"})]})})}),(0,r.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(n.span,{className:"base",children:[(0,r.jsx)(n.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,r.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,r.jsx)(n.span,{className:"mopen",children:"("}),(0,r.jsxs)(n.span,{className:"mord",children:[(0,r.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,r.jsx)(n.span,{className:"msupsub",children:(0,r.jsx)(n.span,{className:"vlist-t",children:(0,r.jsx)(n.span,{className:"vlist-r",children:(0,r.jsx)(n.span,{className:"vlist",style:{height:"0.8141em"},children:(0,r.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,r.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsx)(n.span,{className:"mord mtight",children:(0,r.jsx)(n.span,{className:"mord mtight",children:"2"})})})]})})})})})]}),(0,r.jsx)(n.span,{className:"mclose",children:")"})]})})]}),")\uc744 \uac00\uc9c8 \uc218 \ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\ub4e4\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ub85c\uc9c1\uc740 \ubb34\uc870\uac74 \uace0\uc815\ub420 \uc218 \ubc16\uc5d0 \uc5c6\ub2e4\uba74 \ud65c\uc6a9\ud574\ubcfc \uc218 \uc788\ub294 \uc804\ub7b5\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.p,{children:"\uc9c0\uae08\ubd80\ud130 \uc57d\uac04\uc758 \ucef4\ud4e8\ud130\uacfc\ud559 \uc9c0\uc2dd\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub3d9\uc2dc\uc131\uacfc \ubcd1\ub82c\uc131\uc744 \uad6c\ubd84\ud574\uc57c \ud569\ub2c8\ub2e4. \ucc98\uc74c\ubcf4\uba74 \ube44\uc2b7\ud574\ubcf4\uc785\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \ub2f9\uc5f0\ud788 \uc544\uc8fc \ub2e4\ub985\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\ub3d9\uc2dc\uc131\uc740 \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uac00 \ub17c\ube14\ub7ec\ud0b9 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub85c \uc798 \ucc98\ub9ac\ud574\uc90d\ub2c8\ub2e4. \ucc98\ub9ac\uac00 \uc644\ub8cc\ub418\uace0 Call Stack\uc774 \ube44\uc5b4\uc788\uc744 \ub54c Task Queue\uc5d0\uc11c Promise\ubd80\ud130 dequeue\ud558\uace0 Call Stack\uc73c\ub85c Push\ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \ud574\ub3c4 \uacb0\uad6d \uc791\uc5c5\ud558\uae30 \uc704\ud574 \ud65c\uc6a9\ud558\ub294 \uc4f0\ub808\ub4dc\ub294 1\uac1c\uc785\ub2c8\ub2e4. \uc4f0\ub808\ub4dc 1\uac1c\ub97c \uc791\uc5c5 \uc21c\uc11c\ub97c \ubc14\uafb8\uba74\uc11c \ub354\uc6b1\ub354 \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30\ub9cc \ud55c \uac83\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\ubcd1\ub82c\uc131 \uac19\uc740 \uacbd\uc6b0\uc5d0\ub294 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud558\ub294 CPU \ucf54\uc5b4 \uc5ec\ub7ec\uac1c\ub97c \uc811\uadfc\ud558\ub294 \uac83\uc785\ub2c8\ub2e4. \uc4f0\ub808\ub4dc\ub97c \uc5ec\ub7ec\uac1c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uac83\uc785\ub2c8\ub2e4. \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uc758 \uacbd\uc6b0 \ud558\ub098\uc758 \ud504\ub85c\uc138\uc2a4 \ub0b4\ubd80\uc5d0\uc11c \ubaa8\ub450 \ub3d9\uc77c\ud55c \uc4f0\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4 \ub0b4\ubd80\uc5d0\uc11c \uc4f0\ub808\ub4dc\ub97c \uc5ec\ub7ec\uac1c \uc4f0\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uc774\uc81c \ucf54\ub4dc \uc608\uc2dc\uc785\ub2c8\ub2e4. node.js \ud658\uacbd\uc5d0\uc11c \uc791\uc131\ud55c \ucf54\ub4dc\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="index.js"',children:"const jobs = Array.from({ length: 100 }, () => 1e9);\n\nconst tick = performance.now();\n\nfor (const job of jobs) {\n  let count = 0;\n  for (let i = 0; i < job; i++) {\n    count += 1;\n  }\n}\n\nconst tock = performance.now();\n\nconsole.log(`\uc18c\uc694\uc2dc\uac04: ${tock - tick}ms`);\n// \uc18c\uc694\uc2dc\uac04: 58577.20620799996ms\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\uc800\ub294 \ub9e5\ubd81 M2\ub97c \uc0ac\uc6a9\ud558\ub294\ub370 fireship\uc758 i9 \uc778\ud154\uc774 \ub354 \ube60\ub985\ub2c8\ub2e4. ",(0,r.jsx)(n.del,{children:"\u3142\u3137\u3142\u3137"})]}),"\n",(0,r.jsx)(n.p,{children:"\uc9c0\uae08 \uc608\uc2dc\ub294 \ucf54\ub4dc\uc758 \uc2f1\uae00\uc4f0\ub808\ub4dc\ub85c \ucc98\ub9ac\ud588\uc744 \ub54c \uc131\ub2a5\uc785\ub2c8\ub2e4. \uc55e\uc73c\ub85c Worker\ub97c \ud65c\uc6a9\ud558\ub294 \uc608\uc2dc\ub97c \ubcf4\uc5ec\uc8fc\uaca0\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="index.js"',children:"const { Worker } = require('worker_threads');\n\nconst jobs = Array.from({ length: 100 }, () => 1e9);\n\n/**\n * @param {number} jobs\n * @param {number} concurrentWorkers\n */\nfunction run(jobs, concurrentWorkers) {\n  const chunks = chunkify(jobs, concurrentWorkers);\n\n  const tick = performance.now();\n  let completedWorkers = 0;\n\n  chunks.forEach((data, i) => {\n    const worker = new Worker('./worker.js');\n    completedWorkers += 1;\n    worker.postMessage(data);\n    worker.on('message', (data) => {\n      // \uc5ec\uae30\uc11c worker \ubaa8\ub4c8\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc62c \ub54c\ub294 on\uc5d0\uc11c message\uc5d0\uc11c \uc811\uadfc\ud569\ub2c8\ub2e4.\n      console.log(`${i} ${data} \uc644\ub8cc`);\n      if (completedWorkers === concurrentWorkers) {\n        const tock = performance.now();\n        console.log(`\uc18c\uc694\uc2dc\uac04: ${tock - tick}ms`);\n      }\n      process.exit();\n      // worker\ub294 \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \ub2e4\ub978 \uc4f0\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uadf8\ub798\uc11c \ud504\ub85c\uc138\uc2a4\ub97c \uc885\ub8cc\uc2dc\ucf1c\uc57c \ud569\ub2c8\ub2e4.\n    });\n  });\n}\n\n/**\n * @param {any[]} arr\n * @param {number} n\n */\nfunction chunkify(arr, n) {\n  let chunk = [];\n  for (let i = n; i > 0; i--) {\n    chunk.push(arr.splice(0, Math.ceil(arr.length / i)));\n  }\n  return chunk;\n}\n\nrun(jobs, 4);\n// \uc18c\uc694\uc2dc\uac04: 15889.809874999337ms\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="worker.js"',children:"const { parentPort } = require('worker_threads');\n\nparentPort.on('message', (jobs) => {\n  for (const job of jobs) {\n    let count = 0;\n    for (let i = 0; i < job; i++) {\n      count += 1;\n    }\n  }\n  parentPort.postMessage('done');\n  // \uba54\uc778 \uc4f0\ub808\ub4dc(?)\ub85c worker\uc5d0\uc11c \uacc4\uc0b0\ud55c \ub370\uc774\ud130\ub97c \ubcf4\ub0c5\ub2c8\ub2e4.\n  // \uc800\ub294 \uadf8\ub0e5 \"done\"\uc744 \uc804\ub2ec\ud569\ub2c8\ub2e4.\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc57d\uac04 \uc8fc\uc758\ud560 \ubd80\ubd84\ub4e4\ub3c4 \uc788\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4. \uc6b0\ub9ac\uac00 \ub9cc\ub4e0 \uc11c\ube44\uc2a4\uac00 \ub300\uc751\ud560 \ub514\ubc14\uc774\uc2a4 \ubb38\uc81c\uc785\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\uc758 CPU \ucf54\uc5b4\uac00 \uc2f1\uae00 \ucf54\uc5b4\uc778 \uc0ac\uc6a9\uc790\ub3c4 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub9c9\uc57d\uc5d0 \uc774\ub7f0 \uc720\uc800\ub97c \ud0c0\uac9f \uc720\uc800\uc774\uace0 \ub300\ubd80\ubd84 \uc720\uc800\ub85c \uc124\uc815\ud558\uace0 \uc11c\ube44\uc2a4\ub97c \uac1c\ubc1c\ud55c\ub2e4\uba74 \uc790\uc81c\ud574\uc57c \ud560 \ubc29\ubc95\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uc77c\ub2e8 \ucf54\uc5b4\ub97c 4\uac1c \ud65c\uc6a9\ud558\ub2c8\uae4c \uc2dc\uac04\ub3c4 1/4 \ube44\uc2b7\ud558\uac8c \uac10\uc18c\ud588\uc2b5\ub2c8\ub2e4."})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>a});var r=s(67294);const o={},t=r.createContext(o);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);