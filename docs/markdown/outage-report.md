---
description: '장애 리포트'
tags: ['Markdown', 'error', '글쓰기 형식', 'outage report']
sidebar_position: 6
draft: true
---

# 장애보고서

장애 보고서는 버그 리포트와 다릅니다.

버그를 고치는 것은 비즈니스 결정일 수 있습니다. 버그가 만드는 문제가 마이너한데 해결하기 위해 투입해야 하는 노력이 메이저하면 보류를 결정하는 것도 초기 스타트업으로 내릴 수 있는 결정입니다.

장애는 해할 수 없으면 서비스 그리고 비즈니스에 치명적입니다. 수익이 차단됩니다. 유저 수가 감소할 수 있습니다. 심각하면 법적으로 처벌받을 수 있습니다.

장애 보고서를 작성할 때 중요한 것 중 하나는 신속성입니다. 장애 보고서는 장애가 발생, 해결 직후 혹은 해결 직후 다음날 오전끝나기 전(점심 시간)까지 작성해야 합니다. 물론 회사마다 다르지만 임원진은 보통 이렇게 마감을 설정할 것입니다.

장애 보고서는 원인이란 원인의 원인이 없는 원인입니다. 재귀함수로 생각하면 베이스 케이스를 찾은 경우입니다. 원인의 여러 스택 깊게(사실 높게지만) 찾아 들어가야 합니다.

장애 보고서의 독자는 개발자와 경영 임원 2 종류입니다.

개발자 독자는 개발자마다 중요한 컨텍스트가 다르다. 비슷한 장애가 또 있다면 해결한 과정을 찾아보기 위해 활용할 것입니다.

장애 보고서는 개발자의 시말서입니다. 임원은 이 장애가 비즈니스에 준 악영향을 알고 싶어합니다. 손해를 재무적 관점에서 파악하려는 것이 관점입니다. 회사마다 이 정보를 활용하는 방식은 다를 것입니다. 인사팀은 연봉 협상 시즌이 되면 임원에게 이런 자료를 받고 감봉, 동결의 근거로 활용할 것입니다. 감봉과 동결로 해결하기 어려우면 해고하고 손해배상 청구소송 절차도 밟습니다. 이런 과정에 근거자료입니다.

장애보고서는 4가지 기법이 중요합니다.

1. 질문에 대답하는 신속한 글쓰기
2. 원인과 이유를 찾는 분석적 글쓰기
3. 상사를 고려하는 비즈니스 관점의 글쓰기
4. 원하는 것을 얻는 정치적 글쓰기

### 질문에 대답하는 신속한 글쓰기

- 대화를 글로 옮기기
  - 대화 과정에 생각하는 시간은 비교적 짧습니다.
  - 가상의 동료를 가정하고 대화의 문답을 정리하는 방식으로 정리하면 수월할 것입니다.
    - 동료는 6하원칙으로 질문하도록 합니다.
- 주어, 목적어, 서술어로 작성

```md
# 서버 모듈 변경 문제로 사용자 결제 불가(22:00 ~ 23:00)

## 요약

| 항목      | 내용                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------ |
| 장애 내용 | 사용자 결제 불가(22:00 ~ 23:00, 1시간)                                                           |
| 장애 영향 | 장애 중 결제 시도 100 -> 1시간 후 결제 비율 10%(평균50%)                                         |
| 장애 원인 | 서버 쪽 결제 모듈 변경 시 모듈 인터페이스의 함수를 수정했으나 프론트에서는 기존 함수로 에러 발생 |
| 조치 사항 | 서버 쪽의 바뀐 함수를 호출하도록 프론트 코드 수정                                                |
| 조치 결과 | 결제 기능 정상 작동                                                                              |
| 핵심 원인 | 서버와 프론트 팀간 커뮤니케이션 단절                                                             |
| 향후 대책 | 서버, 프론트 팀장이 소통 방법 협의하고 보고                                                      |
```

위는 예시입니다.

```md
# (장애 제목)

## 요약

| 항목      | 내용 | 상세                    |
| --------- | ---- | ----------------------- |
| 장애 내용 | ?    | [장애 내용](#장애-내용) |
| 장애 영향 | ?    | [장애 영향](#장애-영향) |
| 장애 원인 | ?    | [장애 원인](#장애-원인) |
| 조치 사항 | ?    | [조치 사항](#조치-사항) |
| 조치 결과 | ?    | [조치 결과](#조치-결과) |
| 핵심 원인 | ?    | [핵심 원인](#핵심-원인) |
| 향후 대책 | ?    | [향후 대책](#향후-대책) |

## 장애 내용

- ?

## 장애 영향

- ?

## 장애 원인

- ?

## 조치 사항

- ?

## 조치 결과

- ?

## 핵심 원인

- ?

## 향후 대책

- ?
```

위 포멧을 활용하도록 합니다. 상세 내용까지 모두 작성해야 하면 아래 따로 다루도록 합니다. 표는 요약입니다.

### 원인과 이유를 찾는 분석적 글쓰기

구체적인 방법론의 이름이 있습니다. 5 why라고 부릅니다. 왜를 5번 질문하고 매 질문마다 더 구체적인 답변이 나와야 합니다.

다른 접근은 원인의 원인을 찾을 수 없는 상황입니다. ~~원인의 원인이 없다고 설정할 기준은 저도 모르겠습니다.~~

질문의 프레임에 따라 찾고자 한 원인이 바뀔 수 있습니다.

5번에 무조건 매몰 될 필요는 없습니다. 생각보다 원인은 얕을 수 있고 반대로 엄청 깊을 수 있습니다. 5번인 이유는 저도 잘 모릅니다. 하지만 체스 선수는 5수까지 미리 볼 수 있다고 합니다. 이거랑 관련이 있는지 모르겠습니다.

다른 이유는 너무 구체적이면 신은 존재하는가? 등 존재론적 위기 유발하는 질문으로 들어갈 수 있기 때문입니다.

why를 설정하는 방향은 2가지로 보도록 합니다. 하나는 현상, 동작에 해당하는 원입니다. 다른 하나는 사람이 초래한 이유입니다.

### 상사를 고려하는 비즈니스 관점의 글쓰기

장애 보고서를 받는 사람들은 모든 것을 돈으로 생각합니다. 장애를 (영업) 손실로 환산할 수 없다면 장애를 일으킨 서비스가 왜 필요한가? 이런 관점으로 생각합니다.

임원에게 모든 직원의 역할과 업무와 성과는 모두 월급이나 상여금 같은 돈으로 연결되어 측정됩니다. 비즈니스도 동일합니다.

장애 보고서를 작성한다는 것은 비즈니스 관점으로 매출과 비용 관점으로 설명하는 것입니다.

- 개발자 관점: 장애로 인해 사용자가 1시간 동안 결제할 수 없음
- 임원진 관점: 장애로 인해 ~~억원의 매출 손실이 발생

임원의 관점을 맞추기 위해서는 매출의 기대값을 구해야 합니다. 하루 결제량을 1/24로 구하고 말 수 있습니다. 물론 근거가 부족합니다. 시간마다 요청량이 다릅니다. 대학생이 많이 이용하면 낮에 요청이 고르게 많을 것입니다. 직장인이 주로 사용하면 퇴근 후 결제 요청이 많을 것입니다. 결제 시간대별로 원래 발생했을 결제 요청량과 결제 금액을 기대값을 구할 때 활용할 수 있습니다.

이런 측면에서는 데이터 분석과 비슷합니다. 본래 엔지니어는 기술과 비즈니스를 연결해야 하는데 비즈니스 문제를 많은 기술적인 역량을 활용하는 것입니다. 데이터 분석은 비즈니스 문제를 비즈니스로 해결하는데 기술적인 역량을 가미하는 것입니다.

### 원하는 것을 얻는 정치적 글쓰기

정치적 글쓰기라는 측면은 이런 측면입니다.

> 데이터 센터 냉방기 미교체시 화재 발생 염려

개발자는 버그와 에러로 안전과민증을 훈련 받습니다. 하지만 개발자가 아닌 사람은 안전불감증을 갖고 있는 사람이 더 많습니다. 하지만 이렇게 해서 교체를 거절해도 결국 책임 개발자의 몫입니다.

> 냉방기 폭발 시 서비스 전면 중단

위처럼 말하는 것이 더 적절합니다. 실제 교체가 필요하면 그 심각성을 알려야 합니다. 하지만 딱히 필요없는데 심각하게 하면 양치기소년처럼 골로갈 수 있습니다.

---

장애는 같은 거 같지만 다른 즉 비슷한 장애가 다시 발생할 수 있습니다. 개발자들인 이렇게 단정하기 어려운 것을 임원이 쉽게 이해할 수 있게 단정해달라고 요구받습니다.

| 장애 재발 가능성 | 표현                         |
| ---------------- | ---------------------------- |
| 1%               | 절대 재발하지 않는다         |
| 10%              | 재발하지 않는다              |
| 20%              | 재발할지도 모른다            |
| 30%              | 재발할 수 있다               |
| 40%              | 재발한다고 볼 수도 있다      |
| 50%              | 재발할 수 있다               |
| 60%              | 재발하지 않는다고 볼 수 없다 |
| 70%              | 재발한다고 보여진다          |
| 80%              | 재발한다                     |
| 90%              | 재발할 것이 틀림없다         |
| 99%              | 받드시 재발한다              |

개발자는 실제 위 표에 대응되게 장애 가능성을 표현하기에는 독단적인(arbitrary)부분이 많습니다. 어림잡기입니다.

<!-- # 장애 리포트

실제 프로덕션 환경에서 장애가 발생하면 작성하고 올리는 리포트입니다. 장애의 정의는 서비스를 정상적으로 사용할 수 없는 경우입니다. 개인정보 유출은 장애가 아니라 리포트의 종류가 달라집니다.

또 장애 리포트 민방위 비슷하게 훈련하고 훈련의 형식으로 작성하는 경우도 있습니다. 모의로 다른 환경에서 장애를 발생시키고 고치는 과정을 훈련하는 운동입니다. 실제 모니터링, 테스트, 로깅 등 정상동작하는지 확인하기 위해 시험하는 것입니다. 이상한 기업에서는 실험 환경인데 실제 환경인줄 알고 착각하고 직원을 해고했다는 소문도 있습니다.

독자가 개발자인 경우와 경영진인 경우 2가지가 있습니다. 처음 상황을 공유할 때 보고서, 나중에 개발자가읽을 보고서, 경영진이 손해배상 청구소송할 보고서를 각각 상황에 맞는 템플릿을 사용하면 됩니다.

## 긴급 보고

장애가 발생하면 바로 상황을 공유해야 합니다. 조기에 상황을 파악하고 운이 좋으면 바로 차단할 수 있습니다.

```md
내용
영향
원인
조치
결과
향후
```

## 분석 보고

개발자들이 장애를 대비하기 위해 모의로 작성할 때도 동일하게 작성해주면 됩니다.

```md

```

## 비즈니스 보고

경영진에게 보고할 때 쓰는 보고서입니다. 장애보고서인데 경영진을 위해 다시 따로 작성합니다.

제일 중요한 보고서는 비즈니스적 글쓰기입니다. 발생한 손실을 재무적으로 표현해야 합니다. 책임 전가, 해고, 손해배상 청구소송의 절차를 위해 필요한 근거 자료입니다.

```md
# 제목

- 장애 내용 요약

## 요약

## 손실

- 재무학, 경제성공학, 산업공학, 금융공학 등 금액으로 환산가능한 모든 수단을 활용함
- 고객에게 책임져야할 금액은 최소화
- 피고에게 청구할 금액은 최대화
- 손실을 입증가능 한 법적 근거
  - 순수하게 장애보고서로만 손해 입증하기에는 어려움
  - 다른 분명한 증거를 근거자료로 토대를 마련해 소송절차에 고지를 점유
```

https://so-es-immer.tistory.com/entry/%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%9D%98-%EA%B8%80%EC%93%B0%EA%B8%B0-%EC%9E%A5%EC%95%A0-%EB%B3%B4%EA%B3%A0%EC%84%9C%EC%97%90-%EA%B4%80%ED%95%B4#google_vignette

https://post.naver.com/viewer/postView.nhn?volumeNo=27822268

https://engineering.linecorp.com/ko/blog/line-failure-reporting-and-follow-up-process-culture

요약: 장애 상황에 대해 간략히 설명한다.
장애 탐지 시간: 장애가 최초 탐지된 시간을 명시한다.
영향받은 서비스: 장애에 영향받은 서비스를 명시한다.
장애 원인: 장애가 발생한 원인을 설명한다.
타임라인과 해결 과정: 장애가 최초 발생한 시점부터 주요 진행 과정을 순서대로 설명한다. 어떻게 대응했는지 자세한 설명을 덧붙인다.
해결 과정과 예방책: 장애를 어떻게 해결했는지, 어떤 예방 조치를 취해야 하는지 자세하게 설명한다. Jira 티켓 정보도 포함한다.
관련 문서 및 추가 정보(선택 사항): 필요하면 기타 정보를 추가한다. -->
